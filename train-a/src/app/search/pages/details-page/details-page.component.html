<mat-toolbar-row class="details-head">
  <button mat-button [routerLink]="[paths.main]">
    <mat-icon>arrow_back_ios_new</mat-icon>
  </button>
  <div class="details-head__info">
    <div class="details-head__info-from-to">
      <span> {{ getStationName(from)?.city }}</span>
      <mat-icon>arrow_forward</mat-icon>
      <span> {{ getStationName(to)?.city }}</span>
      <span>{{ details()?.schedule?.segments?.[0]?.time?.[0] | date: 'MMMM dd, HH:mm' }}</span>
    </div>
    <div class="details-head__info-ride">
      <span>Ride {{ details()?.rideId }}</span>
      <button (click)="openModal()" mat-button>
        Route
        <mat-icon>arrow_drop_down</mat-icon>
      </button>
    </div>
  </div>
</mat-toolbar-row>
<mat-tab-group [selectedIndex]="activeTabIndex" (selectedTabChange)="onTabChange($event)">
  @for (carriage of carriages(); track $index) {
    <mat-tab
      *ngIf="details()?.carriages?.includes(carriage.code)"
      label="type {{ carriage.name }} seats: {{
        details() && carriages() && getAllRideSeats(details()!, carriages()!)[carriage.code]
      }} price: {{ details() && getAllRidePrices(details()!)[carriage.code] }}$"
    ></mat-tab>
  }
</mat-tab-group>
@for (carriage of details()?.carriages; track $index) {
  <p *ngIf="carriage === carriages()?.[activeTabIndex]?.code">
    Car {{ $index + 1 }} - {{ getCarriageSeats(details()!, carriages()!)[$index].free }}
  </p>
}
