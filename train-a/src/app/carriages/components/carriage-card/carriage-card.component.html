<mat-card class="carriage" *ngIf="carriagesData">
  <div class="carriage-info">
    <div class="name">{{ name ?? carriagesData.name }}</div>
    <div class="seats-count">{{ carriagesData.totalSeats }} seats</div>
    <button mat-icon-button *ngIf="editable" [matMenuTriggerFor]="menu" aria-label="Settings" class="settings-button">
      <mat-icon>settings</mat-icon>
    </button>
    <mat-menu #menu="matMenu">
      <button mat-menu-item (click)="onUpdate()" *ngIf="editable">
        <mat-icon>edit</mat-icon>
        <span>Update</span>
      </button>
      <button mat-menu-item (click)="onDelete()" *ngIf="editable">
        <mat-icon>delete</mat-icon>
        <span>Delete</span>
      </button>
    </mat-menu>
  </div>
  <div class="seats">
    <div class="rows-wrapper">
      <div class="row" *ngFor="let row of carriagesData.rightRows; let rowIndex = index">
        <button
          class="seat right"
          *ngFor="let seat of row"
          tabindex="0"
          (click)="onSeatSelect(seat)"
          (keyup.enter)="onSeatSelect(seat)"
          [class.selected]="isSelected(seat)"
          [ngClass]="{ 'seat--occupied': occupiedSeats.includes(seat) }"
          [disabled]="occupiedSeats.includes(seat)"
        >
          {{ seat }}
        </button>
      </div>
    </div>

    <div class="rows-wrapper">
      <div class="row" *ngFor="let row of carriagesData.leftRows; let rowIndex = index">
        <button
          class="seat left"
          *ngFor="let seat of row"
          tabindex="0"
          (click)="onSeatSelect(seat)"
          (keyup.enter)="onSeatSelect(seat)"
          [class.selected]="isSelected(seat)"
          [ngClass]="{ 'seat--occupied': occupiedSeats.includes(seat) }"
          [disabled]="occupiedSeats.includes(seat)"
        >
          {{ seat }}
        </button>
      </div>
    </div>
  </div>
</mat-card>
